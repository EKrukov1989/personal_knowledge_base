
### 1. Conditional execution

##### 1.1. Exit status или exit code
Любая команда завершается с каким-нибудь кодом выхода. Параметр  `$?`  хранит код выхода последней завершенной команды.

>[!note] Если в скрипте не прописан явно `exit` он имеет `exit code == 0`.

>[!note] Даже пустой скрипт без единой команды имеет `exit code == 0`.

>[!note] Изначально внутри каждого скрипта `$? == 0`

В bash все условия построены на значении параметра `$?`.
- если `$? == 0` -> `true`
- если `$? != 0` -> `false`

Условие в bash это всегда команда. Например `test`, `[]`, `[[]]`, `(())` - это тоже команды и у них тоже есть код выхода ([[bash - test]]).

##### 1.2. Condition lists
Список условий состоит из команд, разделенных операторами `&&` и `||`.
Данные операторы работают именно так, как мы от них ожидаем:
- оператор `&&` выполняет второе условие, только если первое `true`
- оператор `||` выполняет второе условие, только если первое `false`
Примеры:
```
[ 1 -eq 1 ] && [ 2 -eq 1 ] -> $? == 1 (false)
[ -d "$dir" ] && cd "$dir"
```

##### 1.3. Синтаксис if
Особых пояснений данная конструкция не требует. Синтаксис следующий:

```bash
if <condition list>
then
	<list>
elif <condition list>
then
	<list>
else
	<list>
fi
```

Можно писать в одну строчку если пользоваться точкой с запятой:
```bash
if [cond]; then cmd; elif [cond]; then cmd; else cmd; fi
```

##### 1.4. Синтаксис case
Синтаксис следующий:
```bash
case WORD in
PATTERN) COMMANDS ;;
PATTERN) COMMANDS ;; ## optional
esac
```
`PATTERN` -> может включать в себя wildcharacters: `?`, `*`,  а также `[...]`, а также `|`.
Пример паттерна:
```bash
prefix_* | [xyz] | ??_suffix
```

`[a-zA-Z_][a-zA-Z0-9_]*`