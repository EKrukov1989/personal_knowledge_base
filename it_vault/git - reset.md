___
Основано на https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified

>[!tip]
>Команда `git reset` - пример наикривейшего дизайна!
>Рекомендуется пользоваться командой `git restore`.

___
### 1. Вариант `reset` без указания файла

Алгоритм команды reset состоит из следующих этапов:
1. Перестановка текущей ветки на заданный коммит без изменения индекса и рабочей директории. Если указана опция `--soft`,  то на этом алгоритм закончен.
2. Изменение индекса таким образом, чтобы он соответствовал тому коммиту, на который теперь указывает текущая ветка. Если указана опция `--mixed`,  то на этом алгоритм закончен.
3. Изменение рабочей директории таким образом, чтобы она соответствовала тому коммиту, на который теперь указывает текущая ветка. Этот шаг выполняется только если указана опция `--hard`.

Опция по умолчанию: `--mixed`.

>[!warning]
>Команда `reset` не просто меняет HEAD, a действительно переставляет ветку.

Синтаксис: `git reset [--soft|--mixed|--hard] <commit>`

В качестве коммита может быть указан:
- хэш-код коммита
- другая ветка
- коммит по умолчанию - `HEAD`.

>[!tip]
Для указания коммита удобно использовать синтаксис: `HEAD~N`, который означает N-ый коммит в цепочке родителей HEAD.

Примеры:
`git reset`  <->  `git reset --mixed HEAD` -> стиреть все изменения в индексе.
`git reset --hard`  -> стереть все изменения в индексе и рабочей директории.

___
### 2. Вариант `reset` с указанием файла

Если указан файл, то команда `reset` пропускает первый шаг алгоритма.

Синтаксис: `git reset [--soft|--mixed|--hard] <commit> <pathspec>`

Примеры использования:
- `git reset file.txt`  <->  `git reset --mixed HEAD file.txt` -> откатить `file.txt` в индексе на версию в текущем коммите. Фактически удалить все изменения, которые застэйджены.
- `git reset eb43bf file.txt` -> откатить `file.txt` в индексе на версию, которая указана в коммите `eb43bf`

___
### 3. squashing

Допустим есть цепочка коммитов: `commit_1 <- commit_2 <- commit_3`
Если мы захотим объединить `commit_2` и `commit_3` в один коммит, то это можно будет сделать с помощью следующей последовательности комманд:
```bash
git reset --soft HEAD~2
git commit -m commit_4
```
В результате мы получим цепочку коммитов: `commit_1 <- commit_4`

