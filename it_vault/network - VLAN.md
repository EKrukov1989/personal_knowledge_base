VLAN (Virtual Local Area Network) — виртуальная локальная компьютерная сеть.

Допустим у нас есть довольно большая локальная сеть и мы хотим логически разделить ее на несколько маленьких сетей. Допустим машины соединены следующим образом и мы хотим объединить левые компьютеры в одну сеть и правые компьютеры во вторую сеть.
![[vlab_scheme_2.png]]
В результаты мы хотим, чтобы эти сети сосуществовали параллельно и при этом даже не подозревали о существовании друг друга. Для этого необходимо и достаточно, чтобы широковещательные пакеты из сети 1 никогда не достигали хостов из сети 2 и наоборот. Можно сформулировать определение:

Виртуальной локальной сетью называется группа узлов в сети, весь трафик которой, в том числе и широковещательный, изолирован от остальной сети на канальном уровне.
>[!note]
>В теории иртуальные сети могут перекрываться, то есть один хост может принадлежать одновременно к нескольким сетям. Но обычно так не делают.

## Реализация VLAN
Базовые правила построения VLAN регламентируются IEEE 802.1Q. Самое важное нововведение для VLAN в IEEE 802.1Q - добавление поля VID - VLAN identifier (12 байт), которое содержит номер виртуальной сети.
Реализовать VLAN можно следующим образом:
1. Использовать коммутаторы, поддерживающие стандарт IEEE 802.1Q
2. На каждом коммутаторе для каждого порта, к которому подключается хост, прописать номер VLAN.
3. На каждом коммутаторе каждый порт, к которому подключается другой коммутатор, пометить как транк.
Полученная система работает следующим образом:
- хост отправляет пакет на коммутатор
- коммутатор смотрит в своей таблице VID для этого порта, вписывает его в пакет и отправляет дальше. Теперь пакет сможет перемещаться только в пределах своей VLAN
- последний коммутатор в цепочке вырежет VID из пакета

>[!note]
>Основное назначение VLAN - ограничить область распространения широковещательных пакетов. Но коммутаторы по стандарту IEEE 802.1Q будут контролировать и обычные пакеты. Перед отправлением пакета на какой-либо порт коммутатор проверяет соответствие VID этого порта VID отправителя. В случае несоответствия кадр просто выбрасывается.

Все эти настройки можно автоматизировать, но только отчасти. Все равно VLAN нужно конфигурировать.





