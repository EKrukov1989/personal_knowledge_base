___
Практика работы с субмодулями.
___
### 1. Начальные условия

1. Есть два git-репозитория `super` и `sub1`
2. В репозитории `super` есть две ветки: `main` и `natural`
3. В репозитории `sub1` есть две ветки: `main` и `expand`

___
### 2. Добавление подмодуля

Выполним команду в репозитории `super`:
```bash
git submodule add -b expand -- git@github.com:EKrukov1989/sub1.git submodules/sub1
```
В результате выполнения этой команды в репозиторий `super` будет добавлен подмодуль `sub1`. Он будет склонирован в директорию `<workdir>/submodules/sub1`.

В `<workdir>` появится файл `.gitmodules`.
В файле `<workdir>/.git/config` появится запись о новом подмодуле.На данный момент 

подмодуль еще не закомичен.
После успешного выполнения команды `git submodule add` папка `submodules/sub1` и файл `.gitmodules` будут добавлены в индекс. Чтобы закомитить их нужно только выполнить команду `git commit`

```bash
git commit -m "Добавить подмодуль sub1"
``` 

Команда `submodule add` имеет дополнительные опции:
`-b` -> выбрать ветку подмодуля, если не указать - будет ветка по умолчанию
`--name` -> можно выбрать логическое имя для подмодуля, по умолчанию будет его путь
`--depth` -> можно склонировать репозиторий подмодуля на определенную глубину

___
### 3. Обновление подмодуля

Допустим кто-то другой изменил коммит подмодуля в суперпроекте и закомитил изменения.
Мы вытащили новые изменения из репозитория.

К сожалению, git никак не сигнализирует о том, что подмодули изменились. Узнать о том, что подмодули изменились можно только выполнив команду:
```bash
git submodule
```
Если подмодуль был изменен, то соответствующая строчка будет начинаться с `-` или `+`.

Чтобы обновить подмодуль достаточно выполнить команду:
```bash
git submodule update
```
___
### 4. Изменения только подмодуля

Допустим мы хотим изменить подмодуль самостоятельно, причем только подмодуль.
Нужно перейти в директорию подмодуля, сделать там все изменения и запушить их. Этого будет достаточно.

___
### 5. Переключение подмодуля на другой коммит

Чтобы перекючить подмодуль на другой коммит нужно совершить следующие действия:
```bash
cd <путь к подмодулю>
git checkout <нужный коммит>
cd <путь на суперпроект>
git add <путь к подмодулю>
git commit -m "переключить подмодуль ..."
git push ...
```

___
### 6. Одновременное внесение изменений

Рассмотрим наиболее сложную ситуацию, но довольно распространенную ситуацию -> нужно одновременно внести изменения в подмодуль и в суперпроект.

Самый простой и надежный способ:
1. Сначала внести изменения в подмодуль
2. Потом внести изменения в суперпроект и переключить коммит на подмодуль.
