___
Обычно пользователю не нужна вся история проекта, а нужна только самая последняя версия или несколько последних коммитов. В таких случаях можно воспользоваться механизмом shallow history.
___
### 1. Принцип действия

Допустим у нас есть следующая история в удаленном репозитории:
```
A---B---C---D---E---F---G main
         \
          H---I---J---K---L topic
```
Если мы склонируем этот проект с помощью команды:
- `git clone --depth=3 <remote>`,
то получим следующую историю в локальном репозитории:
```
E(grafted)---F---G main

J(grafted)---K---L topic
```
Коммиты E и J помечены как grafted и история глубже чем на три коммита недоступна.
Git воспринимает коммиты E, J как изначальные, но при этом хранит информацию о том, что история была обрезана. В файле `.git/shallow`, храняться хэши всех grafted коммитов.

В любом момент историю можно выкачать глубже или наоборот.
___
### 2. Опции при клонировании

`--shallow-submodules`
- скачать только последний коммит для субмодулей, обычно это актуально
- (работает только вместо с опцией `--recurse-submodules`)

`--depth <depth>`
- скачать историю на определенную глубину

`--shallow-since=<date>`
- скачать всю историю с определенной даты

___
### 3. Опции при fetch

`--depth=<depth>`
- выкачать историю на определенную глубину (даже меньшую чем сейчас)

`--deepen=<depth>`
- углубить историю (отрицательно значение не поддерживается)

`--shallow-since=<date>`
- скачать историю с определенной даты

`--unshallow`
- выкачать всю историю

