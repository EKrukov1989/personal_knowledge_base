### Предисловие

Большинство людей взаимодействует только с домашним компьютером, причем являются единственным пользователем этого компьютера. В связи с этим концепция пользователей и групп остается в тени.

В то же время концепция пользователей является фундаментом безопасности в операционной системе. Например:
- нельзя войти в систему не имея зарегистрированного пользователя
- любое действие в linux совершается от лица какого-нибудь пользователя (запуск процесса, чтение файла и т.д.)
- у любого файла, каталога или процесса есть пользователь-владелец
- у любого файла или каталога есть права доступа, которые зависят от его владельца или группы
- к системным файлам могут получить доступ только суперюзеры
Таким образом, с помощью системы пользователей удается предотвратить доступ к системе для незарегистрированных пользователей, а для зарегистрированных пользователей - ограничить доступ к определенным файлам.

### 1. Пользователи

В системе linux может быть один или несколько зарегстрированных пользователей. Посмотреть список пользователей можно в файле `/etc/passwd`/.
Выглядит этот вот так:
```
root:x:0:0:root:/root:/bin/bash
gene:x:1000:1000:Eugene:/home/gene:/bin/bash
...другие зарегистрированные пользователи
...множество пользователей назначенных системой
...множество пользователей для пользовательских программ
```
В каждой строчке этого файла хранится следующая информация:

№|пример|описание
-|-|-
1|gene|логин
2|x|место для пароля, но теперь он здесь не хранится
3|1000|uid - идентификатор пользователя
4|1000|gid - идентификатор группы
5|Eugene|настоящее имя пользователя, может быть пустым
6|/home/gene|имя домашнего каталога
7|/bin/bash|имя командного интерпретатора

Сами пароли храняться в файле `/etc/shadow`. Конечно, в захэшированном виде.

У каждого пользователя есть домашний каталог. При добавлении нового пользователя `<username>` этот каталог создается обычно по адресу `/home/<username>` на основе шаблона `/etc/skel`.

>[!note]
>В linux в системе могут работать несколько пользователей одновременно.

С помощью команды `whoami` можно узнать имя своего пользователя.
С помощью команды `who` можно посмотреть пользователей, которые в настоящий момент залогинены в системе.

### 2. Root и superuser

В системе всегда есть пользователь root (uid = 0, gid = 0), который обладает очень широкими полномочиями, а именно:
- может прерывать и изменять ход любого процесса
- имеет все права доступа ко всем файлам в системе

В некоторых системах, например в ubuntu по умолчанию нельзя зайти в систему как root (хотя можно это изменить). Вместо этого предлагается использовать `sudo`.

Команда `sudo` позволяет на время получить привилегии как у root-пользователя, при этом не изменяя пользователя. Это дает ряд преимуществ, например все sudo-действия пользователей логируются в файл `/var/log.auth.log`, в том числе с указанием uid-пользователя.

Использовать `sudo` могут не все пользватели, а только указанные в файле `/etc/sudoers`.

### 3. Группы

Группы бывают двух типов: primary и secondary.
Каждый пользователь состоит в одной и только одной primary-группе, а также может состоять в нескольких secondary-группах. С помощью команды `id`, можно получить список групп пользователя. Например:
`uid=1000(gene) gid=1000(gene) groups=1000(gene),4(adm),27(sudo),100(users)`
Здесь `gid` - primary-группа,  `groups` - список secondary-групп.

>[!tip]
>Еще можно вывести список групп с помощью команды `groups`.

При создании файлов ОС назначает их владельцем пользователя, который их создал, а в качестве группы назначает primary-группу создателя.
Вся информация о группах находится в файле `/etc/groups`.

### Послесловие
Как использовать права пользователей и групп:  [[linux - access permissions]]
Как изменить владельца файла: [[command - chown]]
Как изменить права файла: [[command - chmod]]

>[!warning] Сюда неплохо бы добавить команды `groupadd` и `usermod`.