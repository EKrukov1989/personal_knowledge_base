
### 1. Стандартные потоки

Во время выполнения программа как правило:
- связана с монитором, на котором может выводит информацию о ходе выполнения программы и сообщения пользователю
- связана с клавиатурой, с которой может получать команды или другую входную информацию

От конкретных связей абстрагировались и программа теперь вместо связей непосредственно с оборудованием имеет несколько стандартных потоков:

abbreviation | name | file descriptor | path
-|-|-|-
stdin | standard input stream | 0 | `/dev/fd/0`
stdout | standard output stream | 1 | `/dev/fd/1`
stderr | standard error stream | 2 | `/dev/fd/2`

Каждый из этих потоков может быть перенаправлен.

По умолчанию вывод и вывод ошибок все так же отправляются на терминал, а стандартный ввод подключен к клавиатуре.

>[!warning]
>То есть стандартный вывод - это не вывод на терминал. Это обозначение вывода программы.


### 2. Redirection

##### 3.1. Перенаправление stdout
Вывод можно перенаправить в файл, используя операторы `>`  и `>>`. 
Например: `echo hello > filename`

Операторы `>` и `>>` создают новый файл с именем `filename` и пишут вывод в него или если файл с таким именем существует, то пишут вывод в существующий файл.

Разница между двумя этим операторами в том, что `>` стирает все содержимое в существующем файле, а оператор `>>` добавляет вывод к содержимому существующего файла.

>[!note]
>Redirection выполняется до выполнения всех остальных команд в строке. В том числе создание и очистка файла.

>[!note]
>Оператор `>>` всегда добавляет текст на новую строку, даже если в файле последняя строка пустая.

>[!tip]
>Если команда читает что-либо из файла, то можно заставить ее читать из стандартного потока, если вместо имени файла поставить `-` (дефис). Пример:
>`cat file1.txt | diff - file2.txt`

##### 2.2. Перенаправление stderr

Поток stderr можно перенаправить следующим образом:
`echo hello 2> errorfile` (здесь 2 - это файловый дескриптор stderr)

Можно перенаправить поток в файл, используя файловый дескриптор: `echo something >&N`, где `N` -> дескриптор файла.

Например таким образом можно отправить stdout в stderr:
```bash
echo "error message" >&2
```

>[!tip]
>В linux есть специальный файл - /dev/null, который называется bit bucket. Все отправленное в этот файл пропадает безвозвратно. Зачастую удобно отправить поток в него: `command > /dev/null`

##### 2.3. Перенаправление stdin

Поток stdin также можно перенаправить: `read var < filename`

##### 2.4. Перенаправление нескольких потоков

Можно перенаправить несколько потоков в одной строке следующим образом: 
`echo hello > outfile 2> errorfile`
`grep abc < inputfile > outputfile`

>[!tip]
>Чтобы отправить stdin и stdout в один файл используется специальный синтаксис: `&> filename` или`&>> filename`

