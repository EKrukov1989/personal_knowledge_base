___
Команда `git rebase` перемещения основания ветки на другой коммит.

Предположим, что ветки выглядят следующим образом:
```text
      A---B---C expand (HEAD)
	 /
D---E---F---G main
```
Коммит `E` - это основание ветки `expand`. Требуется перенести основание ветки `expand` на коммит `G`.

В отличие от `merge` в процессе ребэйза нужно находится на ветке, которая вмерживается. Нужно выполнить команды:
`git checkout expand`
`git rebase main`

Процесс ребэйза происходит следующим образом:
- все изменения в ветке `expand`, сделанные после общего коммита (`E`) сохраняются во временные файлы
- ветка expand переставляется на тот же коммит, на который указывает main, (`G`)
- все сохранённые изменения последовательно применяются  к комиту `G`
 В результате получается следующая картина:
```text
              A---B---C expand (HEAD)
	         /
D---E---F---G main
```

После рибэйза можно переместить ветку main вперед до коммита (`С`), так называемый fast-forward merge.
Это можно сделать с помощью команд:
- `git checkout main`
- `git merge expand`
А затем удалить ветку expand:
- `git branch -d expand`
В итоге получить линейную историю:
```text
D---E---F---G---A---B---C main (HEAD)
```

В случае конфликтов при переносе коммитов следует действовать ровно так же, как и для команды `merge` ([[git - merge]]).
___
##### Синтаксис:

`git rebase (--continue | --abort | --quit )`
- команды аналогичны командам `merge` ([[git - merge]])
`git rebase --onto <newbase> <upstream> <branch>`
- переместить ветку `<branch>` с ветки `<upstream>` на `<newbase>`

`<branch>` -> ветка, которую следует перебазировать
`<newbase>` -> ветка, на которую предстоит перебазировать
`<upstream>` -> ветка, с которой следует перебазировать
По умолчанию:
`<branch>` == `HEAD`
`<newbase>` == `<upstream>`

`git rebase <upstream>`
- перебазирует текущую ветку на `<upstream>`
___
##### Перебазирование в общем виде

Рассмотрим более сложный случай. Допустим есть следующая история:
```text	
            A---B---C natural (HEAD)
	       /
      D---E---F---G expand
	 /
H---I---J---K---L main
```
Задача: переместить ветку `natural` на ветку `main`, т.е. комиты `A`, `B` и  `С`.
Если использовать команду `git rebase main`, то будут перемещены все комиты от точки соединения ветко `main` и `natural`, т.е. `D`, `E`, `A`, `B` и `C`.
Команда `git rebase --onto main expand natural` переместит только коммиты `A`, `B` и  `С`.
___
##### Сквош в интерактивном режиме

`-i, --interactive`
- выполнять ребэйз в интерактивном режиме

Алгоритм выполнения этой команды:
1. Пользователю демонстрируют список коммитов, которые предстоит ребэйзить
2. Пользователь может в этом списке указать какие коммиты следует сквошить
3. Если есть конфликты - разрешение конфликтов
4. Пользователю предлагают переписать сообщения коммитов

Пример:
```
pick   d07887d commit_3_message
pick   d2cae1c commit_4_message
squash d8786ee commit_5_message
pick   35d0269 commit_6_message
```
Третий коммит помечен как `squash`. Это значит что он будет соединен с предыдущим коммитом (вторым сверху).

Т.е. если мы хотим сквошнуть все коммиты, то нужно сделать вот так:
```
pick d07887d commit_3_message
s    d2cae1c commit_4_message
s    d8786ee commit_5_message
s    35d0269 commit_6_message
```

Альтернативный вариант сквоша - с помощью команды ([[git - reset]]).
