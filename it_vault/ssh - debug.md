___
ssh-подключение это очень сложный процесс, в котором многое может пойти не так как запланировано. В этом статье изложены способы, которые могут помочь в наладке ssh-соединения.

___
### 1. Journalctl

Некоторую информацию можно получить если открыть на хосте journalctl:
```bash
journalctl -b -u ssh.service -o verbose -S "18:17:16"
```

___
### 2. SSH verbosity

Можно почитать сообщения ssh-клиента:
```bash
ssh -vvv <remote_username>@r<remote_hostname> 2> ssh_log
```

___
### 3.  SSHD verbosity

sshd запускаетcя  автоматически на 22 порту. Однако для целей отладки мы можем запустить sshd самостоятельно.

Порт 22 скорее всего будет занят, поэтому для отладки лучше использовать другой, например 2000. Нужно не забыть открыть этот порт, например: 
```bash
sudo ufw allow 2000
```

С помощью опции `-ddd` мы запускаем sshd в режим отладки, это значит:
- сервер будет отправить подробные сообщения о своей работе в stderr
- сервер будет запущен НЕ в фоновом режиме
- сервер обработает одно соединение, после чего завершит свою работу
```bash
sudo sshd -ddd -p 2000 2> sshd_log
```

Конечно, клиент должен подключаться к тому же порту:
```bash
ssh -vvv <remote_username>@r<remote_hostname> -p 2000 2> ssh_log
```