___
### ssh-agent

ssh-agent - это программа для хранения приватных ключей, которые используются для аутентификации. В ubuntu включен по умолчанию.

Изначально ssh-agent не хранит никаких ключей.
Ключи могут быть добавлены в ssh-agent следующим образом:
- с помощью ssh-add
- с помощью клиента ssh, если AddKeysToAgent установлен
- при генерации ключей в ssh-keygen
Также ключи могут быть удалены из агента с помощью ssh-add.

ssh-agent это программа с которой пользователь не должен взаимодействовать напрямую. Пользователь может задавать некоторые настройки для ssh-agent, однако основное взаимодействие должно осуществляться с помощью ssh-add.

___
### ssh-add

Команда ssh-add предназначена для добавления и удаления ключей в ssh-agent, а также для некоторых других операций с агентом.

>[!note]
>Для работы ssh-add необходимо:
>- ssh-agent был запущен
>- переменная окружения SSH_AUTH_SOCK должна содержать имя его сокета.

##### Добавление ключей

`ssh-add (без аргументов)`
Команда попробует добавить ключи с названиями по умолчанию. А именно:
- `~/.ssh/id_rsa`
- `~/.ssh/id_ecdsa`
- `~/.ssh/id_ecdsa_sk`
- `~/.ssh/id_ed25519`
- `~/.ssh/id_ed25519_sk`
- `~/.ssh/id_dsa`
Если приватный ключ защищен пассфрэйзом, то команда запросит его у пользователя.
После загрузки ключа команда пытается прочитать связанную информацию из сертификата с тем же именем.

Синтаксис:
`ssh-add [-cDdKkLlqvXx] [-E fingerprint_hash] [-H hostkey_file] [-h destination_constraint] [-S provider] [-t life] [file ...]`

Опции:

`-L`
- вывести параметры ключей, которые в данный момент храняться в агенте (выводит на экран публичные ключи)

`-l`
- вывести фингерпринты всех ключей, которые храняться в агенте

`-c`
- каждый раз спрашивать пользователя о пароле

`-D`
- удалить ВСЕ ключи из ssh-агента

`-d`
- удалить ключ из агента

>[!note]
>Команда `ssh-add -d` (без аргументов) удаляет все ключи с названиями по умолчанию.

Синтаксис: `ssh-add -T pubkey ...`

`-T pubkey` 
- проверить пригоден ли соответствующий ключ для подписи и верификации

