___
С точки зрения пользователя контейнер выглядит как операционная система в которой запущен один или несколько процессов.

Контейнер можно создать из образа с помощью команды `docker run`. При создании контейнера сразу запускается entrypoint-процесс. Когда этот процесс завершается, то docker автоматически останавливает контейнер.

Запущенный контейнер можно принудительно остановить: `docker stop`. Все выполняемые процессы будут завершены, а контейнер сохранен в текущем состоянии.
Остановленный контейнер можно снова запустить снова: `docker start`. При этому entrypoint-процесс будет зупущен повторно.

Можно запустить еще один процесс в уже запущенном (running) контейнере с помощью команды `docker exec`. Это команду удобно использовать для дебага.

Контейнер можно идентифицировать с помощью одного из трех идентификаторов:
- short UUID
- longer UUID
- name

___
### 1. Команда `docker run`

Команда `run` является наиболее сложной и важно при работе с контейнерами, поэтому ее следует рассмотреть отдельно.

```
docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
```
Команда `run` выполняет следующее:
- ищет образ локально и если не находит - скачивает из регистра
- создает контейнер с собственной файловой системой, изолированным деревом процессов
- запускает контейнер и начинает выполнение `COMMAND`.

Можно не указывать `COMMAND ARG...`, если в образе прописаны инструкции `ENTRYPOINT` или `CMD` ([[docker - Dockerfile]]).

Можно запустить контейнер в одном из трех режимов:

название|опции|описание
-|-|-
по умолчанию||в терминал будет выводится `stdout` процесса
интерактивный| `-i -t`|`stdout` и `stdin` процеса подключены к терминалу
фоновый|`-d`|после запуска процесс полностью отключен от терминала

Опции:
`-i, --interactive=true|false` (default=false)
- оставить возможность общения с контейнером через терминал, даже если мы не подключены к нему (с помощью `attach`)
`-t, --tty=true|false`
- pseudo-tty
`--name`
- присвоить имя созданному контейнеру
`-d`
- отключить контейнер от терминала после запуска (detach)
`-p -P`
- опубликовать порты. Подробнее - [[docker - networks basics]]

>[!tip]
>Для закрытия оболочки достаточно написать exit

___
### 2. Список команд

`docker ps`
- вывести список контейнеров
- `-a` -> показать все контейнеры, по умолчанию показываются только запущенные
`docker stop container_id`
- завершить процесс запущенный в контейнер (с помощью `SIGTERM`)
`docker start container_id`
- заново начать остановленный процесс (причем `entrypoint` будет заново вызван)
`docker inspect container_id`
- вывести всю информацию о контейнере в формает json
`docker inspect --format='{{.namespace.key}}' container_id`
- вывести значение определенного ключа
`docker rm container_id`
- удалить остановленный контейнер
`docker rm -f container_id`
- удалить работающий (running) контейнер 
`docker attach container_id`
- подключить стандартные потоки ввода/вывода контейнера к терминалу. Контейнер должен быть запущен (running)
`docker exec [-i -t] container_id <COMMAND> [ARGS...]`
- выполнить команду в запущенном (running) контейнере
`docker log container_id`
- все что entrypoint-процесс пишет в `stdout` записывает в логи. С помощью этой команды логи можно посмотреть
